Численный расчет модели
=======================

.. |simulate| image:: /images/icons/simulate.gif

Проведением численных расчетов в BioUML управляет **инструмент
численного решения** (SimulationEngine). На основе содержания диаграммы,
инструмент численного решения автоматически генерирует численную модель
соответствующего типа, пригодную для расчетов. Кроме того, он
определяет список **численных решателей** (Simulator), пригодных для
сгенерированной модели, запускает численные расчеты, обеспечивает вывод
результатов на график и сохранение результатов в файл или базу данных.

ПК BioUML поддерживает 6 основных типов **инструментов численного решения** динамики биологических систем:

-     алгебро-дифференциальные уравнения (ОДУ) с дискретными событиями и задержкой по времени;
-     стохастические дифференциальные уравнения; 
-     стохастические модели;
-     анализ стационарных потоков (Flux Balance Analysis, или FBA);
-     моделирования кровотока в основных артериях и артериолах (гемодинамика);
-     агентное моделирование.

Для *выбора опций симуляции модели* перейдите в область :doc:`поля операций </user_interface>` и на горизонтальной
панели выберите вкладку :guilabel:`Simulation`. Далее в вертикальной панели перейдите в раздел :guilabel:`Engine`.
В поле :guilabel:`Selected engine` выберите один из подходящих *инструментов для
численных расчетов модели* и *численный решатель*, предоставляемых данным инструментом в поле
:guilabel:`Simulator name`. Затем настройте *параметры выбранного решателя* в :guilabel:`Simulator options`.

В настройках инструмента выберите *начальное время расчетов* в поле :guilabel:`Selected engine`,
*шаг*, с которым будут сохраняться или выводиться на
график результаты в поле :guilabel:`Time increment`, а также *конечное время* в поле 
:guilabel:`Completion time`. 

Для того, чтобы *запустить симуляцию модели*, сначала *сохраните* выбранные опции для симуляции, путем нажатия на иконку |save|, расположенную в верхней части поля операций,
и затем нажмите на иконку |simulate|. После окончания численного расчета модели в открывшемся окне будет отображен график результатов. 

Создание графика
================

.. |plot| image:: /images/icons/plot.gif

Результаты численного расчета модели отображаются на **графике**. Опциям *изменения графика* соответствуют
вертикальная вкладка :guilabel:`Plot`, которая отображается при открытии вкладки :guilabel:`Simulation`
в в :doc:`поле операций </user_interface>`. Для *создания нового графика* нажмите кнопку :guilabel:`Add` в 
|folder| Plots. Для каждого графика будет создана папка, где задаются *опции графика*:

.. figure:: images/interface/plots.png
   :width: 60%
   :alt: Графики
   :align: center	 
   
   Опции для создания графика в BioUML

-     **Tittle** - титл графика;
-     **Флаг Active** - при добавлении флага график будет выводиться при симуляции модели;
-     **X axis info** - настройка свойств оси X;
-     **Y axis info** - настройка свойств оси Y;
-     **X variable** - задача значений для оси X;
-     **Сurves** - задача значений для оси Y;
-     **Experiments** - ...

**Настройка свойств оси X и Y** содержит одинаковые опции: 

-     *Формат оси* (Axis type) - логарифмический (Logarithmic, Log 10) или числовой (Number) формат;
-     *Титл оси* (Axis title);
-     *Флаг автоматического задания диапазона оси* (Axis auto rangе);

Существуют еще один способ для того, чтобы *добавить результаты расчета* на график,
перейдите во вкладку :guilabel:`Model` в :doc:`поле операций </user_interface>`.  и далее на вертикальной панели
выберите нужную вкладку: :guilabel:`Entities`, :guilabel:`Variables`, :guilabel:`Buses`. 
Затем нажмите на строку, соответствующую выбранной переменной, и затем на иконку |plot|.

.. note:
   Добавление результатов численных расчетов нескольких переменных на график добавляется путем зажатия Shift
   и выбора нескольких строк. 
















   
   